name: Vérifier sessions longues

on:
  schedule:
    # 21h15 UTC = 17h15 Québec (été) / 16h15 (hiver)
    # 22h15 UTC = 17h15 Québec (hiver) / 18h15 (été)
    - cron: '15 22 * * *'
  workflow_dispatch: # Permet de lancer manuellement pour tester

jobs:
  check-sessions:
    runs-on: ubuntu-latest
    steps:
      - name: Appeler API check-long-sessions
        run: |
          curl -X GET "${{ secrets.APP_URL }}/api/cron/check-long-sessions" \
            -H "Authorization: Bearer ${{ secrets.CRON_SECRET }}" \
            -H "Content-Type: application/json"
